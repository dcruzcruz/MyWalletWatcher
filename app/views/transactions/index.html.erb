<h1>Transactions</h1>

<% if params[:search].blank? %>
  <%= link_to 'New Transaction', new_transaction_path, class: 'btn btn-dark' %>
  <%= paginate @transactions %>
<% end %>

<%= form_tag(transactions_path, method: :get, class: 'form-inline mt-3') do %>
  <%= text_field_tag :search, params[:search], class: 'form-control mr-sm-2', placeholder: 'Search by description' %>
  <%= submit_tag 'Search', class: 'btn btn-outline-success my-2 my-sm-0' %>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th>Household Member</th>
      <th>Account</th>
      <th>Type</th>
      <th>Amount</th>
      <th>Date</th>
      <th>Description</th>
      <th>Category</th>
      <th>Tag</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @transactions.each do |transaction| %>
      <tr>
        <td><%= transaction.account.household_member.name %></td>
        <td><%= transaction.account.account_name %></td>
        <td><%= transaction.transaction_type %></td>
        <td><%= transaction.amount %></td>
        <td><%= transaction.date %></td>
        <td><%= transaction.description %></td>
        <td><%= transaction.categories.map(&:category_name).join(', ') %></td>
        <td><%= transaction.tags.map(&:tag_name).join(', ') %></td>
        <td>
          <%= link_to 'Show', transaction_path(transaction), class: 'btn btn-info' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>